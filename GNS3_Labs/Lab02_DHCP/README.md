# DHCP: настройка серверов, relay и анализ пакетов

## ТЗ

Построить и настроить сеть с DHCP-серверами, DHCP Relay, анализом пакетов, используя MikroTik, Linux (Ubuntu-Server) и Wireshark. Проверить выдачу IP-адресов, работу DORA и других сообщений DHCP, а также корректность работы в разных подсетях.

---

## 1. Построить базовую топологию

- 4 клиента (Ubuntu) подключены к Switch → MikroTik  
- Подсеть: 192.168.10.0/24

---

## 2. Настройка DHCP на MikroTik

- Интерфейс ether1: 192.168.10.1/24  
- DHCP пул: 192.168.10.10–192.168.10.100  
- DNS: 8.8.8.8  
- Lease time: 1 день

---

## 3. Анализ DORA

- Подключить один ПК, запустить Wireshark  
- Отфильтровать трафик `dhcp`  
- Захватить и проанализировать пакеты: Discover → Offer → Request → Ack

---

## 4. Анализ дополнительных сообщений DHCP

- **NAK** - клиент запросил IP вне пула  
- **DECLINE** — клиент сообщает, что IP уже используется  
- **RELEASE** — клиент освобождает адрес  
- **INFORM** — клиент запрашивает параметры без аренды IP

---

## 5. Статическая привязка IP по MAC (Fixed Address)

- Для одного ПК задать статический IP по MAC-адресу  
- Проверить, что при переподключении клиент получает тот же адрес

---

## 6. Настройка DHCP на Linux (Ubuntu-Server)

- Установить `isc-dhcp-server`  
- Отключить DHCP на MikroTik  
- Настроить пул: 192.168.10.10–192.168.10.100

---

## 7. Настройка DHCP Relay

- Первая подсеть: Ubuntu DHCP-сервер + 3 ПК → MikroTik  
- Вторая подсеть: отдельная группа ПК → MikroTik 
- Настроить маршрутизацию между подсетями  
- Настроить DHCP Relay на MikroTik R1, чтобы запросы из второй подсети пересылались на Ubuntu DHCP-сервер первой подсети  
- Проверить, что клиенты во второй подсети получают IP-адреса и параметры от DHCP-сервера Ubuntu



